#!/bin/sh

# Check if any changes are in src/ or tests/ directory
STAGED_TARGET_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '^(src|tests)/' || true)

if [ -z "$STAGED_TARGET_FILES" ]; then
	echo "‚è≠Ô∏è  No src/ or tests/ files staged, skipping pre-commit checks"
	exit 0
fi

# Auto-fix folder structure and imports (silent unless changes made)
bash ./scripts/shell/auto_fix_structure.sh

# Validate file naming conventions
echo "üîç Validating file naming conventions..."
bash ./scripts/shell/validate_filenames.sh || exit 1

# Run lint-staged for code formatting
bun x lint-staged
